# FinalPersonalProject
https://github.com/zif1519


# 게임제목 : 내가 인벤토리 속 아이템이 되었던 건에 대하여

# 게임제작 중 힘들었던 부분
### Cinemachine 이해하기 < 대략 6시간 소모 ㅋㅋ >
강의에서 배운 Cinemachine의 경우 처음 사용해보는 컴포넌트여서 그 안의 설정들을 스크립트로 어떻게 조작하는지 이해하기 어려웠다.
나는 게임 시작시에 바로 Cursor가 lock 되는 형태를 싫어하고 마우스 우클릭 시에만 카메라의 각도가 전환되는 게임을 좋아하기 때문에. (3D 게임에 멀미가 심해서)
새로운 카메라의 움직임이 필요했는데, 시네머신의 변수들을 조작하는 방법을 몰랐다.


결국 나중에 CinemachinePOV, CinemachineComposer 등의 존재들을 찾게 되었고, 이들의 변수들을 바꾸는 방법을 알게 되었다.

최종 구현 -> CinemachinePOV 의  버티컬,호리즌탈 뎀퍼맥스값을 조절하는 방식을 통해서 마우스 우클릭시에 커서락모드가 되며 뎀퍼값이 5가되고, 우클릭 해제시 락모드가 해제되고 뎀퍼값이 0이 되도록
조절해서 구현했다.

### 컨셉이 논리적으로 맞도록 상상하기
#### 컨셉 설명 < 시간 상당히 소모 >
컨셉이 땅에 떨어진 인벤토리를 내가 주웠는데, 그 자리에 인벤토리가 다시 생성된 상황, 그리고 내가 그 인벤토리 속으로 숨어서 게임이 시작된다는 컨셉이다.
이 경우 거울을 거울에 비친것과 같이, 나는 인벤토리 속에 있는데, 그 인벤토리는 내가 가지고 있는 인벤토리이므로, 그 인벤토리 속에는 또 다른 내가 존재한다는
컨셉이다.
#### 컨셉 구현
1. 메인카메라
이 컨셉을 위해서는 우선 여러개의 카메라가 필요했다. 우선 메인 카메라는 현재 내가 존재하는 세상을 비추어야 한다. 이는 인벤토리속에 숨은 '나'라는 캐릭터가 존재하는 공간이다.
게임에서는 하나의 큰 버블을 그려넣었고, 이 버블속에 내가 갇혀있다는 개념이다.
2. 세컨드 카메라
나는 내 인벤토리를 바라볼 수 있어야 했다. 당연히 그 인벤토리는 나라는 존재가 들어가 있는 상태여야 했다. 그래서 그걸 구현하기 위해, 엄청 밖의 위치에서 큰 버블을 비추는 카메라가
만들어내는 영상을 찍어서, 그 영상을 인벤토리라는 오브젝트의 표면에 보이도록 설정을 했다.
3. 서드 카메라
인벤토리속의 내가('작은나') 인벤토리 밖의 나 ('나')를 쳐다보는 경우에는 '나' 도 큰 버블 밖의 나('큰나')를 쳐다봐야 했다. 그래서 작은 버블 속에 카메라를 두고,
그 카메라의 영상을 찍어서, 메인 카메라의 skybox 부분으로 사용을 했다.
 

### 작은 인벤토리속의 세상 구현하기 < RenderTexture 이해하기 3시간, 셰이더로 날린시간 6시간, 해결법 찾는데 +1일 날림...>
컨셉의 가장 중요한 부분을 차지하는 인벤토리속 아이템인 '나' 를 표현하기 위해 만들어낸 smallBall 이라는 오브젝트를 구현하기가 어려웠다
서브 카메라로 캐릭터가 존재하는 공간을 밖의 먼 거리에서 촬영하도록 하여 Render Texture를 생성하고, 그 렌더 텍스쳐를 이용해서 구의 표면에
보이도록 하려고 했으나, 이게 셰이더 작업이 필요한 관계로 구현하기가 너무 어려웠다. 시간은 짧고 셰이더의 내용은 너무 많았다.
해결방법 : 정말 엄청나게 많은 시도 끝에 최종적으로 선택한 것은 구 속에 카메라 방향의 수직한 평면을 비출수 있는 얇은 원판을 구현하자는 것이었다.
원판은 카메라의 방향을 실시간으로 추적하여 그에 수직한 방향을 보이도록 하여, 마치 구를 쳐다보는 착각을 일으키도록 구현했다.
각도를 구현하는 도중에 계속 반전이 일어나거나 원하는 각도가 안나왔는데 나중에 그냥 이각 저각을 곱하다가 (270f, 270f, 270f)의 오일러각을
가지는 쿼터니언을 곱해주니 잘 되었다... 이게 왜 되는거야?? (슬프지만 수학적 회전인 관계로 지금은 바빠서 분석은 패스)
결과적으로는 원하는 모습을 구현하는데 성공했다.


![SmallBallGIF](https://github.com/Zif1519/FinalPersonalProject/assets/141081153/a1408da2-e59c-459d-9d06-e66651efdd31)
